<div class="well center span10 offset1 top">
  <h1><%= gravatar_for @user %> My Report Cards | <%= @user.name %></h1>
</div>

<div class="row-fluid">
<div class="span10 offset1">
      <div class="well">
          <%= 
              grid(@tasks_grid, show_filters: :always) do |g|
         
                 g.column name: 'Project Name', model: 'Project', attribute: 'project_name', auto_reload: true do |p|
                   p.project.project_name if p.project
                 end
         
                 g.column name: 'Type', attribute: 'type', auto_reload: true do |p|
                   p.type
                 end
         
                 g.column name: 'Services Member', model: 'User', attribute: 'name', auto_reload: true do |p|
                   p.user.name if p.user
                 end
         
                 g.column name: 'Report Card', attribute: 'report_card', auto_reload: true do |p|
                   p.report_card
                 end

                           g.column name: 'Total Points', attribute: 'report_card', auto_reload: true do |p|
                             if not(p.report_card.nil?)
                                p.report_card.split(',').length
                             else
                                0
                             end
                           end
          
              end
          %>
</div>
</div>
</div>
  
<div class="row-fluid">
      <div class="well span10 offset1 charts2">
        <%= column_chart @report_cards_array[:count], library: {title: "Report Card Breakdown by Project" , titleTextStyle: {fontSize: 20}, vAxis: {title: "Points Total", textStyle: {fontSize: 20}},   hAxis: {title: "Project Name"}, height: 300}, colors: ["#345768"]%>
      </div>
  </div>
  <div class="row-fluid">
      <div class="well span10 offset1 charts bottom">
        <%= bar_chart @report_cards_array[:breakdown], library: {tooltip: {textStyle: {color: "#345768"}} ,title: "Report Card Breakdown by Category", titleTextStyle: {fontSize: 20}, vAxis: {title: "  Category", textStyle: {fontSize: 20}}, height: 700, hAxis: {title: "Count of Occurrences"}},  colors: ["#345768"]%>
      </div>
</div>
</div>