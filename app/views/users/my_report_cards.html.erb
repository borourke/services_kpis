<div class="well center span10 offset1 top">
  <h1><%= gravatar_for @user %> My Report Cards | <%= @user.name %></h1>
</div>

<div class="row-fluid">
<div class="span10 offset1">
      <div class="well">
        <legend>Job Scoring</legend>
          <%= 
              grid(@tasks_grid, show_filters: :always) do |g|
         
                 g.column name: 'Project Name', model: 'Project', attribute: 'project_name', auto_reload: true do |p|
                   p.project.project_name if p.project
                 end
         
                g.column name: 'CML - Clean', attribute: 'cml_clean', auto_reload: true do |p|
                  p.cml_clean
                end

                g.column name: 'CML - Commented', attribute: 'cml_commented', auto_reload: true do |p|
                  p.cml_commented
                end

                g.column name: 'Tags - Five', attribute: 'tags', auto_reload: true do |p|
                  p.tags
                end

                g.column name: 'Code - Clean', attribute: 'code_clean', auto_reload: true do |p|
                  p.code_clean
                end

                g.column name: 'Code - Utilized', attribute: 'code_utilized', auto_reload: true do |p|
                  p.code_utilized
                end

                g.column name: 'Code - Advanced', attribute: 'code_advanced', auto_reload: true do |p|
                  p.code_advanced
                end

                g.column name: 'Instructions - Excellent', attribute: 'instructions', auto_reload: true do |p|
                  p.instructions
                end

                g.column name: 'Delivery - Timely', attribute: 'delivery_timely', auto_reload: true do |p|
                  p.delivery_timely
                end

                g.column name: 'Delivery - Docs', attribute: 'delivery_docs', auto_reload: true do |p|
                  p.delivery_docs
                end

                g.column name: 'Delivery - Docs', attribute: 'delivery_docs', auto_reload: true do |p|
                  p.delivery_docs
                end

                           g.column name: 'Total Points', attribute: 'report_card', auto_reload: true do |p|
                             if not(p.report_card.nil?)
                                p.report_card.split(',').length
                             else
                                0
                             end
                           end
          
              end
          %>
</div>
</div>
</div>
  
<div class="row-fluid">
      <div class="well span10 offset1 charts2">
        <%= column_chart @report_cards_array[:count], library: {title: "Report Card Breakdown by Project" , titleTextStyle: {fontSize: 20}, vAxis: {title: "Points Total", textStyle: {fontSize: 20}},   hAxis: {title: "Project Name"}, height: 300}, colors: ["#345768"]%>
      </div>
  </div>
  <div class="row-fluid">
      <div class="well span10 offset1 charts bottom">
        <%= bar_chart @report_cards_array[:breakdown], library: {tooltip: {textStyle: {color: "#345768"}} ,title: "Report Card Breakdown by Category", titleTextStyle: {fontSize: 20}, vAxis: {title: "  Category", textStyle: {fontSize: 20}}, height: 700, hAxis: {title: "Count of Occurrences"}},  colors: ["#345768"]%>
      </div>
</div>
</div>